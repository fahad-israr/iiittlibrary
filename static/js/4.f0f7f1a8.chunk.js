(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{130:function(e,t,a){"use strict";a.r(t);var n=a(12),o=a(13),s=a(16),l=a(14),c=a(15),r=a(0),i=a.n(r),u=a(55),d=(a(58),a(59)),h=a(17),m=a(52),p=a(56);function b(){var e=Object(u.a)(["\n    display:inline;\n    margin-top: 0 auto;\n    border-color: red;\n\n"]);return b=function(){return e},e}var E=Object(m.css)(b()),k=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).call(this))).searchstudent=function(t){var a=t.target.value;e.setState({search:a},function(){fetch("https://stark-hamlet-65683.herokuapp.com/students/".concat(a),{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){t&&t.length>0&&e.setState({found:!0,name:t[0].name,roll:t[0].roll,branch:t[0].branch,year:t[0].year,phone:t[0].phone,id:t[0].id,issued:t[0].issued})})})},e.returnBook=function(){var a=e.state,n=a.bookid,o=a.studentid,s=e.state.fine>0?e.state.fine:"Nill";fetch("https://stark-hamlet-65683.herokuapp.com/bookreturn",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookid:n,studentid:o,fine:s})}).then(function(e){return e.json()}).then(function(a){h.toast.info(a,{position:h.toast.POSITION.BOTTOM_RIGHT,closeOnClick:!0,pauseOnHover:!0,autoClose:3e3,draggable:!0,hideProgressBar:!1}),t.hideModal(),e.props.fetchBooks()})},e.state={search:"",studentname:"",roll:"",branch:"",year:"",phone:"",issued:"",studentid:"",found:!1,bookid:"",fine:""},e}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,a=this,n="20vw";if(this.props.books&&this.props.books.length>0){i.a.createElement("div",{style:{marginLeft:"20px"}},"-");e=this.props.books.map(function(e){if(!e.return)return i.a.createElement("tr",{key:e.id,className:"tableRow",style:{fontSize:"0.9em"}},i.a.createElement("td",{className:""},e.bookname),i.a.createElement("td",{className:""},e.isbn&&e.isbn||"-"),i.a.createElement("td",{className:""},e.author&&e.author||"-"),i.a.createElement("td",{className:""},e.edition&&e.edition||"-"),i.a.createElement("td",{className:""},e.publisher&&e.publisher||"-"),i.a.createElement("td",{className:""},e.studentname&&e.studentname||"-"),i.a.createElement("td",{className:""},e.roll&&e.roll||"-"),i.a.createElement("td",{className:"",style:{whiteSpace:"pre-wrap"}},e.issue&&new Date(Date.parse(e.issue)).toDateString()+"\n"+new Date(Date.parse(e.issue)).toLocaleTimeString()||"-"),i.a.createElement("td",{className:""},i.a.createElement(d.a,{to:"/book/"+e.bookid,draggable:"false",className:""},"View Book"),i.a.createElement("br",null),i.a.createElement(d.a,{to:"/student/"+e.studentid,draggable:"false",className:""},"View Student")),i.a.createElement("td",null,i.a.createElement("a",{onClick:function(){a.setState({bookid:e.bookid,studentid:e.studentid,studentname:e.studentname,roll:e.roll,bookname:e.bookname,author:e.author,publisher:e.publisher,edition:e.edition,isbn:e.isbn,fine:Math.floor((Date.parse(new Date)-Date.parse(e.issue))/864e5)-15},t.showModal())}},"Return")))})}else e=this.props.fetched?i.a.createElement("tr",{key:"nodata"},i.a.createElement("td",{className:"noData",colSpan:"6"},"Currently, none of the Books are Issued!!")):i.a.createElement("tr",{key:"nodata"},i.a.createElement("td",{className:"noData",colSpan:"6"},i.a.createElement("div",{className:"sweet-loading"},i.a.createElement(p.ScaleLoader,{css:E,sizeUnit:"px",color:"#0099cc",size:60,height:35,width:8,radius:2,loading:this.state.loading}))));return i.a.createElement("div",{className:"pageRow",id:"booksBlock2"},i.a.createElement("div",{className:"thisBlock"},i.a.createElement("div",{className:"blockBody"},i.a.createElement("div",{className:"thisTable"},i.a.createElement("div",{className:"tbl-header"},i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:""},"Name"),i.a.createElement("th",{className:""},"ISBN"),i.a.createElement("th",{className:""},"Author"),i.a.createElement("th",{className:""},"Edition"),i.a.createElement("th",{className:""},"Publisher"),i.a.createElement("th",{className:""},"Student Name"),i.a.createElement("th",{className:""},"Roll"),i.a.createElement("th",{className:""},"Issued"),i.a.createElement("th",{className:" "},"Info"),i.a.createElement("th",{className:" "},"Action"))))),i.a.createElement("div",{className:"tbl-content"},i.a.createElement("table",null,i.a.createElement("tbody",null,e)))))),i.a.createElement("dialog",{id:"returnBook",className:"dialogBox",onClick:t.hideModal,style:{width:"50vw"}},i.a.createElement("div",{className:"dialogTitle",onClick:t.preventHide},"Return Book",i.a.createElement("button",{onClick:t.hideModal},"X")),i.a.createElement("div",{className:"dialogBody",onClick:t.preventHide},i.a.createElement("div",{style:{width:n}},i.a.createElement("label",null,"Book Name"),i.a.createElement("input",{name:"search",placeholder:"Name",value:this.state.bookname})),i.a.createElement("div",{style:{width:n}},i.a.createElement("label",null,"Author"),i.a.createElement("input",{name:"search",placeholder:"Name",value:this.state.author})),i.a.createElement("div",{style:{width:n}},i.a.createElement("label",null,"Publisher"),i.a.createElement("input",{name:"search",placeholder:"Name",value:this.state.publisher})),i.a.createElement("div",{style:{width:n}},i.a.createElement("label",null,"Edition"),i.a.createElement("input",{name:"search",placeholder:"Name",value:this.state.edition})),i.a.createElement("div",{style:{width:n}},i.a.createElement("label",null,"Student Name"),i.a.createElement("input",{name:"Year",placeholder:"Year",value:this.state.studentname})),i.a.createElement("div",{style:{width:n}},i.a.createElement("label",null,"Roll"),i.a.createElement("input",{name:"Roll",placeholder:"Roll",value:this.state.roll})),i.a.createElement("div",{style:{width:n}},i.a.createElement("label",{className:this.state.fine>0?"redtxt":""},"Fine Amount"),i.a.createElement("input",{name:"Fine",placeholder:"Fine",className:"bold",value:this.state.fine>0?"INR "+this.state.fine+".00":"Nill"}))),i.a.createElement("div",{className:"dialogFooter",onClick:t.preventHide},i.a.createElement("button",{onClick:this.returnBook},"Return"),i.a.createElement("button",{onClick:t.hideModal},"Cancel"))))}}],[{key:"showModal",value:function(){document.getElementById("returnBook").showModal()}},{key:"hideModal",value:function(){document.getElementById("returnBook").close()}},{key:"preventHide",value:function(e){e.stopPropagation()}}]),t}(i.a.Component);a(97);a.d(t,"default",function(){return v});var v=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).call(this))).fetchAllBooks=function(){},e.fetchBooks=function(){fetch("https://stark-hamlet-65683.herokuapp.com/getissuereturn",{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){t&&e.setState({fetched:!0,bookList:t,issued:t.filter(function(e){return!e.return}).length})})},e.countBooks=function(){fetch("https://stark-hamlet-65683.herokuapp.com/countbook",{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){t&&e.setState({total:t[0].count})})},e.countavlBooks=function(){fetch("https://stark-hamlet-65683.herokuapp.com/countavlbook",{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){t&&e.setState({avl:t[0].count})})},e.countStudents=function(){fetch("https://stark-hamlet-65683.herokuapp.com/countstudent",{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){t&&e.setState({students:t[0].count})})},e.state={bookList:[],totalbookList:[],total:"",issued:"",students:"",avl:"",fetched:!1},e}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.fetchBooks(),this.countBooks(),this.countavlBooks(),this.countStudents()}},{key:"render",value:function(){return i.a.createElement("div",{className:"pageView"},i.a.createElement("div",{className:"pageRow",style:{width:"40vw"}},i.a.createElement("div",{className:"box"},i.a.createElement("span",{className:"boxTitle",title:"Total  Books"},"Books"),i.a.createElement("span",{className:"boxValue",title:"Total Books"},this.state.total||0)),i.a.createElement("div",{className:"box"},i.a.createElement("div",{className:"separator"}," ")),i.a.createElement("div",{className:"box"},i.a.createElement("span",{className:"boxTitle",title:"Total number of issued Copies"},"Issued"),i.a.createElement("span",{className:"boxValue",title:"Total number of issued Copies"},this.state.issued||0)),i.a.createElement("div",{className:"box"},i.a.createElement("div",{className:"separator"}," ")),i.a.createElement("div",{className:"box"},i.a.createElement("span",{className:"boxTitle",title:"Total number of Available Books"},"Available"),i.a.createElement("span",{className:"boxValue",title:"Total number of Available Books"},this.state.avl||0)),i.a.createElement("div",{className:"box"},i.a.createElement("div",{className:"separator"}," ")),i.a.createElement("div",{className:"box"},i.a.createElement("span",{className:"boxTitle",title:"Total number of Registered Students"},"Students"),i.a.createElement("span",{className:"boxValue",title:"Total number of Registered Students"},this.state.students||0))),i.a.createElement("div",{className:"pageRow blockTitle",style:{fontSize:"20px",color:"#707070",fontWeight:"500",marginLeft:"10px",cursor:"pointer",width:"40vw"},title:"Books Yet to Be Returned"},"Currently Issued Books"),i.a.createElement(k,{fetchBooks:this.fetchBooks,books:this.state.bookList,fetched:this.state.fetched}),i.a.createElement("div",{className:"footer"},"Made with \u2665 by Fahad Israr"))}}]),t}(i.a.Component)},97:function(e,t,a){}}]);
//# sourceMappingURL=4.f0f7f1a8.chunk.js.map